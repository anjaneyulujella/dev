pipeline
{
agent any
stages
{
stage ('pull code from scm')
{
steps 
{
git branch: 'dev', credentialsId: 'github', url: 'https://github.com/anjaneyulujella/dev.git'
}
}
stage ('build docker file')
{
steps
{
sh 'docker build -t anji .'
}
}
stage ('Docker push')
{
steps
{
withDockerRegistry(credentialsId: 'dh', url: ' https://index.docker.io/v1/')
{
sh 'docker tag anji 9700141998/myimage:anji'
sh 'docker push 9700141998/myimage:anji'
}
}
}
}
}
